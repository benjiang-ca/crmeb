(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4ffeae86"],{"0c75":function(t,a,s){"use strict";var e=s("b0bc"),i=s.n(e);i.a},"1a80":function(t,a,s){},"5abf":function(t,a,s){"use strict";var e=s("9ae1"),i=s.n(e);i.a},"9ae1":function(t,a,s){},b0bc:function(t,a,s){},cc60:function(t,a,s){"use strict";var e=s("1a80"),i=s.n(e);i.a},e6d3:function(t,a,s){"use strict";s.r(a);var e=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"divBox"},[s("el-card",{staticClass:"box-card"},[s("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[s("div",{staticClass:"container"},[s("el-form",{attrs:{size:"small","label-width":"100px"}},[s("el-form-item",{attrs:{label:"状态："}},[s("el-radio-group",{attrs:{type:"button"},on:{change:t.getList},model:{value:t.tableForm.status_tag,callback:function(a){t.$set(t.tableForm,"status_tag",a)},expression:"tableForm.status_tag"}},[s("el-radio-button",{attrs:{label:""}},[t._v("全部")]),t._v(" "),s("el-radio-button",{attrs:{label:"0"}},[t._v("待审核")]),t._v(" "),s("el-radio-button",{attrs:{label:"1"}},[t._v("审核已通过")]),t._v(" "),s("el-radio-button",{attrs:{label:"-1"}},[t._v("审核未通过")])],1)],1),t._v(" "),s("el-form-item",{staticClass:"width100",attrs:{label:"关键字："}},[s("el-input",{staticClass:"selWidth",attrs:{placeholder:"请输入直播间名称/ID/主播昵称/微信号",size:"small"},model:{value:t.tableForm.keyword,callback:function(a){t.$set(t.tableForm,"keyword",a)},expression:"tableForm.keyword"}},[s("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.getList},slot:"append"})],1)],1)],1),t._v(" "),s("router-link",{attrs:{to:{path:t.roterPre+"/marketing/studio/creatStudio"}}},[s("el-button",{attrs:{size:"small",type:"primary"}},[t._v("创建直播间")])],1)],1)]),t._v(" "),s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:t.tableData.data,size:"small","highlight-current-row":""}},[s("el-table-column",{attrs:{label:"序号","min-width":"90"},scopedSlots:t._u([{key:"default",fn:function(a){return[s("span",[t._v(t._s(a.$index+(t.tableForm.page-1)*t.tableForm.limit+1))])]}}])}),t._v(" "),s("el-table-column",{attrs:{prop:"name",label:"直播间名称","min-width":"120"}}),t._v(" "),s("el-table-column",{attrs:{prop:"broadcast_room_id",label:"直播间ID","min-width":"90"}}),t._v(" "),s("el-table-column",{attrs:{prop:"anchor_name",label:"主播昵称","min-width":"90"}}),t._v(" "),s("el-table-column",{attrs:{prop:"anchor_wechat",label:"主播微信号","min-width":"100"}}),t._v(" "),s("el-table-column",{attrs:{prop:"phone",label:"主播手机号","min-width":"150"}}),t._v(" "),s("el-table-column",{attrs:{prop:"start_time","min-width":"150",label:"直播开始时间"}}),t._v(" "),s("el-table-column",{attrs:{prop:"end_time","min-width":"150",label:"直播计划结束时间"}}),t._v(" "),s("el-table-column",{attrs:{label:"直播状态","min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(a){return[s("span",[t._v(t._s(t._f("broadcastStatusFilter")(a.row.live_status)))])]}}])}),t._v(" "),s("el-table-column",{attrs:{prop:"create_time","min-width":"150",label:"创建时间"}}),t._v(" "),-1!==t.tableForm.status_tag?s("el-table-column",{key:"5",attrs:{label:"显示状态","min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(a){return[s("el-switch",{attrs:{"active-value":1,"inactive-value":0,"active-text":"显示","inactive-text":"隐藏"},nativeOn:{click:function(s){return t.onchangeIsShow(a.row)}},model:{value:a.row.is_mer_show,callback:function(s){t.$set(a.row,"is_mer_show",s)},expression:"scope.row.is_mer_show"}})]}}],null,!1,2851256410)}):t._e(),t._v(" "),s("el-table-column",{attrs:{label:"审核状态","min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(a){return[s("span",[t._v(t._s(t._f("liveReviewStatusFilter")(a.row.status)))]),t._v(" "),-1===a.row.status?s("span",{staticStyle:{display:"block","font-size":"12px"}},[t._v("原因 "+t._s(a.row.error_msg))]):t._e()]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"直播商品","min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(a){return[2===a.row.status?s("el-button",{key:"4",attrs:{type:"text",size:"small"},on:{click:function(s){return t.handleImport(a.row)}}},[t._v("导入")]):t._e()]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"操作","min-width":"150",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(a){return[s("el-button",{staticClass:"mr10",attrs:{type:"text",size:"small"},on:{click:function(s){return t.onStudioDetails(a.row.broadcast_room_id)}}},[t._v("详情")]),t._v(" "),2!==a.row.status||103===a.row.live_status||1!==a.row.status?s("el-button",{attrs:{type:"text",size:"small"},on:{click:function(s){return t.handleDelete(a.row.broadcast_room_id,a.$index)}}},[t._v("删除")]):t._e()]}}])})],1),t._v(" "),s("div",{staticClass:"block"},[s("el-pagination",{attrs:{"page-sizes":[20,40,60,80],"page-size":t.tableForm.limit,"current-page":t.tableForm.page,layout:"total, sizes, prev, pager, next, jumper",total:t.tableData.total},on:{"size-change":t.handleSizeChange,"current-change":t.pageChange}})],1)],1),t._v(" "),s("details-from",{ref:"studioDetail"}),t._v(" "),s("import-goods",{ref:"uploadGoods"})],1)},i=[],l=(s("7f7f"),s("b7be")),o=s("83d6"),n=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"divBox"},[t.dialogVisible?s("el-dialog",{attrs:{title:"直播间信息",visible:t.dialogVisible,width:"700px"},on:{"update:visible":function(a){t.dialogVisible=a}}},[s("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}]},[s("div",{staticClass:"box-container"},[s("div",{staticClass:"list sp"},[s("label",{staticClass:"name"},[t._v("直播间名称：")]),t._v(" "),s("span",{staticClass:"info"},[t._v(t._s(t.FormData.name))])]),t._v(" "),s("div",{staticClass:"list sp"},[s("label",{staticClass:"name"},[t._v("主播微信号：")]),t._v(" "),s("span",{staticClass:"info"},[t._v(t._s(t.FormData.anchor_wechat))])]),t._v(" "),s("div",{staticClass:"list sp"},[s("label",{staticClass:"name"},[t._v("直播间ID：")]),t._v(" "),s("span",{staticClass:"info"},[t._v(t._s(t.FormData.broadcast_room_id))])]),t._v(" "),s("div",{staticClass:"list sp"},[s("label",{staticClass:"name"},[t._v("主播昵称：")]),t._v(" "),s("span",{staticClass:"info"},[t._v(t._s(t.FormData.anchor_name))])]),t._v(" "),s("div",{staticClass:"list sp"},[s("label",{staticClass:"name"},[t._v("手机号：")]),t._v(" "),s("span",{staticClass:"info"},[t._v(t._s(t.FormData.phone))])]),t._v(" "),s("div",{staticClass:"list sp"},[s("label",{staticClass:"name"},[t._v("审核结果：")]),t._v(" "),s("span",{staticClass:"info"},[t._v(t._s(t._f("liveReviewStatusFilter")(t.FormData.status)))])]),t._v(" "),s("div",{staticClass:"list sp"},[s("label",{staticClass:"name"},[t._v("直播开始时间：")]),t._v(" "),s("span",{staticClass:"info"},[t._v(t._s(t.FormData.start_time))])]),t._v(" "),s("div",{staticClass:"list sp"},[s("label",{staticClass:"name"},[t._v("直播结束时间：")]),t._v(" "),s("span",{staticClass:"info"},[t._v(t._s(t.FormData.end_time))])]),t._v(" "),s("div",{staticClass:"list sp"},[s("label",{staticClass:"name"},[t._v("直播间类型：")]),t._v(" "),s("span",{staticClass:"info"},[t._v(t._s(t._f("broadcastType")(t.FormData.type)))])]),t._v(" "),s("div",{staticClass:"list sp"},[s("label",{staticClass:"name"},[t._v("显示类型：")]),t._v(" "),s("span",{staticClass:"info"},[t._v(t._s(t._f("broadcastDisplayType")(t.FormData.screen_type)))])]),t._v(" "),s("div",{staticClass:"list sp image"},[s("label",{staticClass:"name"},[t._v("背景图：")]),t._v(" "),s("img",{staticStyle:{"max-width":"150px",height:"80px"},attrs:{src:t.FormData.cover_img}})]),t._v(" "),s("div",{staticClass:"list sp image"},[s("label",{staticClass:"name"},[t._v("分享图：")]),t._v(" "),s("img",{staticStyle:{"max-width":"150px",height:"80px"},attrs:{src:t.FormData.share_img}})]),t._v(" "),s("div",{staticClass:"list sp"},[s("label",{staticClass:"name"},[t._v("是否开启点赞：")]),t._v(" "),s("span",{staticClass:"info blue"},[t._v(t._s(t._f("filterClose")(t.FormData.close_like)))])]),t._v(" "),s("div",{staticClass:"list sp"},[s("label",{staticClass:"name"},[t._v("是否开启货架：")]),t._v(" "),s("span",{staticClass:"info blue"},[t._v(t._s(t._f("filterClose")(t.FormData.close_goods)))])]),t._v(" "),s("div",{staticClass:"list sp"},[s("label",{staticClass:"name"},[t._v("是否开启评论：")]),t._v(" "),s("span",{staticClass:"info blue"},[t._v(t._s(t._f("filterClose")(t.FormData.close_comment)))])]),t._v(" "),s("div",{staticClass:"list sp"},[s("label",{staticClass:"name"},[t._v("是否开启直播回放：")]),t._v(" "),s("span",{staticClass:"info blue"},[t._v(t._s(t.FormData.replay_status?"✔":"✖"))])]),t._v(" "),s("div",{staticClass:"list sp"},[s("label",{staticClass:"name"},[t._v("是否开启分享：")]),t._v(" "),s("span",{staticClass:"info blue"},[t._v(t._s(t.FormData.close_share?"✖":"✔"))])]),t._v(" "),s("div",{staticClass:"list sp"},[s("label",{staticClass:"name"},[t._v("是否开启客服：")]),t._v(" "),s("span",{staticClass:"info blue"},[t._v(t._s(t.FormData.close_kf?"✖":"✔"))])]),t._v(" "),2===t.FormData.status?s("div",{staticClass:"list sp100"},[s("label",{staticClass:"name"},[t._v("已导入直播商品：")]),t._v(" "),s("selected-goods",{ref:"selectedGoods",attrs:{broadcast_room_id:t.FormData.broadcast_room_id}})],1):t._e(),t._v(" "),s("div",{staticClass:"list sp100"},[s("label",{staticClass:"name"},[t._v("备注：")]),t._v(" "),s("span",{staticClass:"info"},[s("el-input",{attrs:{type:"textarea",rows:1},model:{value:t.FormData.mark,callback:function(a){t.$set(t.FormData,"mark",a)},expression:"FormData.mark"}})],1)]),t._v(" "),s("div",{staticClass:"list sp100 mt20"},[s("el-button",{staticClass:"el-button el-button--primary el-button--medium",staticStyle:{width:"100%"},attrs:{type:"button",disabled:""==t.FormData.mark},on:{click:function(a){return t.handleRemarks()}}},[t._v("提交")])],1)])])]):t._e()],1)},r=[],c=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"importedGoods"},[s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],ref:"table",staticStyle:{width:"100%"},attrs:{data:t.tableData.data,size:"samll","highlight-current-row":""}},[s("el-table-column",{attrs:{prop:"product_id",label:"ID","min-width":"50"}}),t._v(" "),s("el-table-column",{attrs:{label:"商品图","min-width":"80"},scopedSlots:t._u([{key:"default",fn:function(t){return[s("el-image",{staticStyle:{width:"36px",height:"36px"},attrs:{src:t.row.cover_img}})]}}])}),t._v(" "),s("el-table-column",{attrs:{prop:"name",label:"商品名称","min-width":"200"}}),t._v(" "),s("el-table-column",{attrs:{label:"库存","min-width":"80"},scopedSlots:t._u([{key:"default",fn:function(a){return[s("span",[t._v(t._s(a.row.product.stock))])]}}])}),t._v(" "),s("el-table-column",{attrs:{prop:"price",label:"直播价","min-width":"80"}}),t._v(" "),s("el-table-column",{attrs:{prop:"pay_num",label:"销售数量","min-width":"80"}}),t._v(" "),s("el-table-column",{attrs:{prop:"pay_price",label:"销售金额","min-width":"80"}})],1),t._v(" "),s("div",{staticClass:"block mb20"},[s("el-pagination",{attrs:{"page-sizes":[3,6,9],"page-size":t.tableFrom.limit,"current-page":t.tableFrom.page,layout:"total, sizes, prev, pager, next, jumper",total:t.tableData.total},on:{"size-change":t.handleSizeChange,"current-change":t.pageChange}})],1)],1)},d=[],m=(s("c5f6"),{name:"GoodsList",data:function(){return{listLoading:!0,multipleSelection:[],tableData:{data:[],total:0},tableFrom:{page:1,limit:3,keyword:""}}},props:{broadcast_room_id:{type:Number}},watch:{broadcast_room_id:{deep:!0,handler:function(t){this.getList(t)}}},mounted:function(){this.getList(this.broadcast_room_id)},methods:{getList:function(t){var a=this;this.listLoading=!0,Object(l["w"])(t,this.tableFrom).then((function(t){a.tableData.data=t.data.list,a.tableData.total=t.data.count,a.listLoading=!1})).catch((function(t){a.listLoading=!1,a.$message.error(t.message)}))},pageChange:function(t){this.tableFrom.page=t,this.getList(this.broadcast_room_id)},handleSizeChange:function(t){this.tableFrom.limit=t,this.getList(this.broadcast_room_id)}}}),u=m,_=s("2877"),b=Object(_["a"])(u,c,d,!1,null,"584fe083",null),v=b.exports,p={name:"studioDetail",components:{selectedGoods:v},data:function(){return{dialogVisible:!1,option:{form:{labelWidth:"150px"}},FormData:{},loading:!1}},mounted:function(){},methods:{getData:function(t){var a=this;this.loading=!0,Object(l["c"])(t).then((function(t){a.FormData=t.data,a.loading=!1,console.log(a.FormData)})).catch((function(t){a.$message.error(t.message),a.loading=!1}))},handleRemarks:function(t){var a=this;Object(l["j"])(this.FormData.broadcast_room_id,this.FormData.mark).then((function(t){a.loading=!1,a.$message.success(t.message),a.dialogVisible=!1,a.$emit("getList")})).catch((function(t){a.$message.error(t.message),a.loading=!1}))}}},h=p,f=(s("0c75"),Object(_["a"])(h,n,r,!1,null,"5feb0322",null)),g=f.exports,C=function(){var t=this,a=t.$createElement,s=t._self._c||a;return t.importVisible?s("el-dialog",{attrs:{title:"商品信息",visible:t.importVisible,width:"700px","before-close":t.handleClose},on:{"update:visible":function(a){t.importVisible=a}}},[s("div",{staticClass:"divBox"},[s("el-form",[s("el-row",[s("el-col",{attrs:{span:24}},[s("el-form-item",{attrs:{label:"直播间名称：","label-width":"150px"}},[s("span",[t._v(t._s(t.broadcast_room))])])],1),t._v(" "),s("el-col",{attrs:{span:24}},[s("el-form-item",{attrs:{label:"直播间ID：","label-width":"150px"}},[s("span",[t._v(t._s(t.broadcast_id))])])],1)],1)],1),t._v(" "),s("div",{staticClass:"box-card"},[t.importVisible?s("form-create",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"fc",staticClass:"formBox",attrs:{rule:t.FormData.rule,"handle-icon":"false"},on:{"on-submit":t.onSubmit}}):t._e()],1)],1)]):t._e()},w=[],D=s("30ba"),F=s.n(D),x={name:"importGoods",components:{formCreate:F.a.$form()},data:function(){return{option:{form:{labelWidth:"150px"},global:{upload:{props:{onSuccess:function(t,a){200===t.status&&(a.url=t.data.src)}}}}},importVisible:!1,selectedProducts:"",broadcast_room:"",broadcast_id:"",image:"",FormData:{action:"/mer/studio/goods/create.html",config:{},rule:[{field:"product_id",props:{height:"536px",maxLength:5,modal:{modal:!1},src:"/merchant/setting/broadcastProduct?field=product_id",srcKey:"src",title:"请选择商品",type:"image",width:"60%"},title:"商品:",type:"frame",value:""}]},loading:!1,selectedGoods:[]}},mounted:function(){},methods:{handleClose:function(){this.importVisible=!1,this.FormData.rule[0].value=""},getFrom:function(){},modalPicTap:function(t,a,s){var e=this;this.$modalUpload((function(s){"1"!==t||a||(e.image=s[0])}),t)},onSubmit:function(t){var a=this;this.listLoading=!0,this.selectedProducts=JSON.parse(localStorage.getItem("broadcastPro"))||[];var s=this.filtersArr(this.selectedProducts),e=this.broadcast_id,i={ids:s,room_id:e};Object(l["d"])(i).then((function(t){a.$message.success(t.message),a.listLoading=!1,a.importVisible=!1,a.FormData.rule[0].value="",localStorage.removeItem("broadcastPro")})).catch((function(t){a.listLoading=!1,a.$message.error(t.message),a.FormData.rule[0].value="",a.importVisible=!1}))},filtersArr:function(t){var a=this;return this.selectedGoods=[],t.map((function(t){a.selectedGoods.push(t.broadcast_goods_id)})),this.selectedGoods}}},y=x,k=(s("cc60"),Object(_["a"])(y,C,w,!1,null,"682aec8d",null)),S=k.exports,L={name:"StudioList",components:{detailsFrom:g,importGoods:S},data:function(){return{Loading:!1,roterPre:o["roterPre"],dialogVisible:!1,importVisible:!1,listLoading:!0,tableData:{data:[],total:0},tableForm:{page:1,limit:20,status_tag:"",keyword:""},liveRoomStatus:""}},mounted:function(){this.getList()},methods:{onStudioDetails:function(t){this.broadcast_room_id=t,this.$refs.studioDetail.dialogVisible=!0,this.$refs.studioDetail.getData(t)},handleImport:function(t){this.$refs.uploadGoods.importVisible=!0,this.$refs.uploadGoods.broadcast_id=t.broadcast_room_id,this.$refs.uploadGoods.broadcast_room=t.name,this.$refs.uploadGoods.image="",localStorage.setItem("liveRoom_id",t.broadcast_room_id)},handleDelete:function(t,a){var s=this;this.$modalSureDelete().then((function(){Object(l["b"])(t).then((function(t){var e=t.message;s.$message.success(e),s.tableData.data.splice(a,1)})).catch((function(t){var a=t.message;s.$message.error(a)}))}))},getList:function(){var t=this;this.listLoading=!0,console.log(this.tableForm),Object(l["e"])(this.tableForm).then((function(a){t.tableData.data=a.data.list,t.tableData.total=a.data.count,t.listLoading=!1})).catch((function(a){t.listLoading=!1,t.$message.error(a.message)}))},pageChange:function(t){this.tableForm.page=t,this.getList()},handleSizeChange:function(t){this.tableForm.limit=t,this.getList()},onchangeIsShow:function(t){var a=this;Object(l["l"])(t.broadcast_room_id,{is_show:t.is_mer_show}).then((function(t){var s=t.message;a.$message.success(s),a.getList()})).catch((function(t){var s=t.message;a.$message.error(s)}))}}},$=L,z=(s("5abf"),Object(_["a"])($,e,i,!1,null,"1b7869dd",null));a["default"]=z.exports}}]);